---
author: Cube219
created: 2023-12-26T22:26:43+09:00
updated: 2023-12-26T22:26:43+09:00
---

[25638번: 트리와 경로 개수 쿼리](https://www.acmicpc.net/problem/25638)

# 풀이

* 한 노드를 거치는 경로의 경우는 2가지로 생각할 수 있다.
* 1. U의 subtree <-> subtree 밖의 노드들 이 경우에서 subtree에서 R,B의 개수는 DFS로 구할 수 있고, 밖의 노드들은 전체 R,B의 개수에서 subtree의 R,B개수를 빼주면 된다.
* 2. subtree 내부에서 U를 거치는 경우 이 경우는 U의 자식들의 R,B를 누적하면서, 누적 R,B <-> 새로운 자식의 R,B로 계산하면 된다.
* 이 2가지 경우를 합쳐보면, DFS 한 번에 모든 노드에 대해서 계산할 수 있다. U가 시작/끝이 되면 안 되므로, 계산할 때 U 자신은 빼줘야 함에 유의.
