---
author: Cube219
created: 2023-12-28T18:48:33+09:00
updated: 2023-12-28T18:48:33+09:00
---

[25911번: 달나라에 사는 토끼와 우주에서 떨어지는 떡](https://www.acmicpc.net/problem/25911)

# 풀이

* outdegree가 1이므로, 컴포넌트에 사이클은 최대 1개이다.
* 만약 사이클에 떡이 떨어지면 컴포넌트에 있는 모든 토끼들은 해당 지점으로 이동하고, 그 이후로는 사이클만 돌게 된다. 처음에 사이클에 들어오는 비용은 그래프를 뒤집은 뒤 dfs같은 걸로 계산하자.
* 이후에는 사이클 내부에서 이동하는 비용만 구하면 된다. 사이클 내부 u에서 v로 이동하는 비용을 prefix sum같은 것으로 전처리하면 빠르게 구할 수 있다.
* 만약 사이클에 떡이 안 떨어진다면 역시 그래프를 뒤집은 뒤 dfs로 가장 멀리 있는 떡으로 비용을 구해주면 된다.
