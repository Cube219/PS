---
author: Cube219
created: 2023-12-28T18:46:49+09:00
updated: 2023-12-28T18:46:49+09:00
---

[25913번: 전투 시뮬레이션](https://www.acmicpc.net/problem/25913)

# 풀이

* 구간의 2/3는 넘지 못하므로, 한 그룹의 크기는 각각 끝에 1/3은 차지한다. 이제 가운데를 나눠가져야 하는데, 이 경계선을 x라 하자. 그러면 왼쪽 구간 합과 오른쪽 구간의 합은 prefix sum으로 구할 수 있다.
* 식을 정리하면, 쿼리마다 고정되는 p[r]+p[l-1]와 2p[x]로 나눌 수 있고, 둘의 차이의 최솟값을 구하면 된다. 이것을 빠르게 구하기 위해서는 merge sort tree를 이용하면 된다. 구간마다 정렬된 배열이 있으므로 이분탐색으로 쿼리당 O(log^2N)에 구할 수 있다.
* +) offline query + segment tree로 쿼리당 O(logN)에 구할 수도 있다.