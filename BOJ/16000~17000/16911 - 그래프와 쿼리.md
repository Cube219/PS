---
author: Cube219
created: 2023-12-17T18:01:11+09:00
updated: 2023-12-17T18:01:11+09:00
---

[16911번: 그래프와 쿼리](https://www.acmicpc.net/problem/16911)

# 풀이

* Offline Dynamic Connectivity 연습문제. 검색하면 보통 간선이 포함되는지 여부를 세그먼트 트리에 미리 전처리해서 관리하나, 더 빠르게 처리할 수 있다. 분할해서 들어가기 전에, 반대쪽 구역을 순회해 들어갈 영역을 만족하는지 확인하면 된다.
* 예를 들어 [l,m]으로 들어가기 전에, [m+1,r]중에 삭제하는 쿼리가 있고, 이것과 대응되는 추가하는 쿼리가 l보다 작거나 같다면 이 간선은 [l,m]에서 무조건 살아있기 때문에 추가해준다.
* l보다 큰 간선은 나중에 [l,m] 영역에서 처리된다. 반대쪽도 비슷하게 하면 된다. 이러면 O(QlogQ)에 처리된다. (실은 그냥 세그로 전처리하는게 더 직관적이다.)