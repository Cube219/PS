---
author: Cube219
created: 2023-12-17T17:46:51+09:00
updated: 2023-12-17T17:46:51+09:00
---

[20579번: Territories](https://www.acmicpc.net/problem/20579)

# 풀이

* 일단은 한 지점에 최대한 동물들을 배치해야 이득임을 알 수 있다. a > b인 상황에서, a에있는 동물 1마리를 b로 옮기면 pair 개수의 변화는 b-(a-1)가 돼서 무조건 손해다.
* 특정한 지점을 기준으로 동물들을 모아보자. 그러면 남은 동물들은 특정한 지점을 포함하는 동물들이다. 영역은 전체 크기보다 작으므로, 4 모서리 중 적어도 2모서리 이상은 영역에 포함되지 않는다.
* 지점에 최대한 배치할수록 이득이므로, 4 모서리 중 한 모서리에 최대한 배치해보자. 그러면 남는 동물들은 한 모서리를 포함하게 되는데, 이러면 무조건 반대쪽 모서리는 포함이 안 되므로 반대쪽 모서리에 배치하면 된다. 이것을 각 모서리마다 해보면 된다.
* 배열을 5개를 준비하자. map[i][j] = 해당 칸에 포함되는 동물의 개수 c0~c4[i][j] = (i,j)에 포함되는 동물들 중에, 각 모서리에 포함이 안 되는 동물의 개수 이렇게 정의하자. 위 배열은 imos로 O(XY)에 구할 수 있다.
* (i,j)를 기준으로, 해당 지점에 넣는 동물의 수는 S-map[i][j]이고, 남은 동물은 map[i][j]이다. 여기서 한 모서리에 몰아넣는 동물의 수는 cx[i][j]고, 반대쪽 모서리에 넣을 남은 동물은 map[i][j]-cx[i][j]이다. 이것을 전체 영역으로 순회하면 된다.