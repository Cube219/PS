---
author: Cube219
created: 2023-12-28T18:05:29+09:00
updated: 2023-12-28T18:05:29+09:00
---

[30370번: Gacha 101](https://www.acmicpc.net/problem/30370)

# 풀이

* `101`이 만들어지는 순간의 확률을 구해야 하는데, 쉽지 않다. 역으로 `101`이 절대로 만들어지지 않는 확률을 구한뒤 빼는 방식으로 접근하자.
* `101`이 만들어지는 순간을 최대한 피해야 하는데, 생각해보면 이는 1이 무조건 연속해서 있어야 한다.
    * 만약 `...100001...`처럼 1 사이에 0이 존재하게 된다면, 언젠가는 사이에 1이 채워지면서 `101` 형태가 만들어지게 된다 ($A_i >= 1$이기 때문)
* 이는 처음에 공을 뽑아 어느 한 자리가 1로 채워진다면, 이후에는 무조건 인접한 양쪽 끝으로만 뽑아야 한다.
* 처음 공 위치를 기준으로 양쪽 영역은 서로 영향을 주지 않으므로 독립이다.
    * 그러므로 전체 영역에서 i번째 위치의 공을 뽑을 확률, [0, i-1]영역에서 오른쪽->왼쪽으로 채우는 확률, [i + 1, N-1] 영역에서 왼쪽->오른쪽으로 채우는 확률을 곱해주면 되고, 이를 모든 위치에서 구한 뒤 더하면 답이 된다.
* [0, x]영역에서 오른쪽->왼쪽으로 채우는 확률 또한 비슷하게 구해주면 된다.
    * [0, x]영역에서 x번째 위치의 공을 뽑을 확률 * [0, x-1]영역 확률 * [x,x]영역 확률(1)
    * 뒤에 2개도 독립이므로 그냥 곱해주면 된다.
