---
author: Cube219
created: 2022-12-02T12:39:34+09:00
updated: 2022-12-02T12:39:34+09:00
---

[17607번: 수열과 쿼리 31](https://www.acmicpc.net/problem/17607)

# 풀이

역시 배열을 뒤집는 문제다. 이것은 Splay tree나 Treap을 이용해 풀 수 있다. 2번 쿼리는 연속하는 가장 긴 부분 수열이므로 금광 세그랑 비슷하게 `mx`, `lmx`, `rmx`를 관리하면 될 것 같고, 실제로 노드를 업데이트할 때 비슷하게 하면 된다.

다만 현재 노드의 값이 0/1에 따라 로직이 조금 바뀌고, 왼/오른쪽 자식 깊이까지 lazy를 push해야 한다. 또한 뒤집을 때 `lmx`와 `rmx`도 서로 바꿔줘야 한다는 점에 유의.
