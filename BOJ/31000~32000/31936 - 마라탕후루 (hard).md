---
author: Cube219
created: 2024-06-01T15:43:17+09:00
updated: 2024-06-01T15:43:17+09:00
---

[31936번: 마라탕후루 (hard)](https://www.acmicpc.net/problem/31936)

> 출처: [2024 아주대학교 프로그래밍 경시대회 APC](https://www.acmicpc.net/category/1037) Open Contest O번

# 풀이

* 값이 2개로 나누어져 있으므로, (샤인머스캣-딸기)인 값으로 생각해보자 ($c=b-a$)
* 이 경우 만약 로봇이 딸기를 꽂는다면 $-P$를, 샤인머스캣을 꽂는다면 $Q$를 더하는 것으로 볼 수 있으며, 목표는 모든 꼬치의 값을 $0$으로 만드는 것이다.
* 만약 로봇이 특정 꼬치에 딸기를 $x$, 샤인머스캣을 $y$번 꽂는다면, 꼬치의 값을 0으로 만들어야 하므로 $c - Px + Qy = 0$ 이며, 식을 정리하면 $Px - Qy = c$가 된다.
* 이를 만족하는 $x, y$들은 [확장 유클리드 알고리즘](https://en.wikipedia.org/wiki/Extended_Euclidean_algorithm)으로 구할 수 있다.
    * 물론 $c$가 $\gcd(P, Q)$의 배수를 만족해야 한다. 애초에 만족하지 못하면 0으로 못 만들기 때문이다.
* 이렇게 해서 모든 꼬치의 딸기와 샤인머스캣의 개수를 동일하게 맞췄다고 생각하자.
* 이때 딸기와 샤인머스캣을 꽂은 횟수가 다르다면, 어딘가에 남은 횟수를 채워줘야 한다.
    * 그리고 이로 인해 값이 $0$에서 바뀌었다면, 해당 꼬치에 딸기와 샤인머스캣을 동시에 계속 꽂아줘서 0이 되도록 만들어주면 된다.
* 이렇게 마지막에 동시에 꽂는 과정이 필요하기 때문에, 각 꼬치별로 $x, y$를 신중하게 선택해야 한다.
    * 만약 $P < Q$인 경우, 동시에 꽃을 수록 +가 되기 때문에, 최대한 $x<y$ 가 되어 남은 횟수를 딸기가 되도록 해야 한다.
    * 만약 $P > Q$인 경우, 반대로 최대한 $x>y$가 되어 남은 횟수를 샤인머스캣이 되도록 해야 한다.
* 그리고 이는 $x, y$ 둘 다 최대한 $0$에 가깝게 설정하면 된다.
    * $x, y$의 값을 조정하는데 $x= x_0 + k \cdot \frac{P}{gcd(P, Q)}$, $y = y_0 - k \cdot \frac{-Q}{\gcd(P, Q)}$ 식을 써야 한다.
        * 편의를 위해 GCD 값을 양수로 생각하자. (결국 $k$에 $-1$을 곱하면 되니까)
    * 만약 $P > Q$인 경우 $k$값을 올리면 $x$와 $y$는 $y$쪽으로 점점 더 벌어지게 된다.
    * 만약 $P < Q$인 경우 $k$값을 올리면 반대로 $x$쪽을 점점 더 벌어지게 된다.
    * 이는 위에서 지향하고자 하는 것과 반대이므로, $k$값을 최대한 낮추는 방향으로 가야 한다.
    * 물론 그러면서 $x, y$가 음수가 되면 안 되므로, 둘 다 최대한 $0$에 가깝게 설정해야 한다.
