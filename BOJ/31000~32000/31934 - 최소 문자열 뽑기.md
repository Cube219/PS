---
author: Cube219
created: 2024-05-29T22:20:21+09:00
updated: 2024-05-29T22:20:21+09:00
---

[31934번: 최소 문자열 뽑기](https://www.acmicpc.net/problem/31934)

> 출처: [2024 성균관대학교 프로그래밍 경진대회 with APC](https://www.acmicpc.net/category/detail/4224) H번

# 풀이

* 일단 한 줄만 있다고 생각하자. 또한 가리는 것 대신에 선택을 한다고 생각하자.
* 이때 사전 순으로 가장 앞서는 문자열을 어떻게 선택할 수 있을까?
* 하나씩 선택을 한다고 생각하자. 그러면 처음 선택할 때 가장 앞서는 알파벳을 선택하면 된다.
* 이를 계속하다 가장 앞서는 알파벳를 다 선택했다면, 마지막으로 선택한 알파벳 다음 위치부터 앞서는 알파벳을 선택해야 한다.
    * 이때 중요한 것은 **마지막으로 선택한 알파벳 다음 위치부터**라는 점이다. 왜냐하면 이전 위치의 알파벳을 선택하면 앞서 선택한 알파벳들 사이에 들어가게 되고, 이는 사전순으로 크게 밀려나기 때문이다.
* -> 즉, (마지막으로 선택한 알파벳의 위치, M] 영역에서 가장 앞서면서, 가장 앞에 있는 알파벳을 선택하는 것이다.
    * 이를 빠르게 하기 위해, segment tree나 set을 이용할 수 있다.
* 이를 반복했는데도 아직 선택해야 할 알파벳이 남았다면, 결국 뒤로 가서 선택해야 한다.
* 이때 최적의 방법은, (마지막 이전 선택 위치, 마지막 선택 위치) 영역에서 하는 것 이다.
    * 현재 선택한 알파벳이 a...a...a...b...c (->aaabc)라 가정하자.
    * 이때 b...c 영역을 선택하면 aaab(x)c가 된다.
    * 만약 다른 영역을 선택한다면 aaa(x)bc가 되고, 이는 무조건 후자가 사전 순으로 뒤로 간다.
        * x가 b보다 앞선 알파벳일수도 있다고 할 수도 있으나, 그러면 이전 로직에 의해 이미 선택되어 있을 것이다.
    * 이는 현재 선택한 알파벳의 위치를 stack으로 관리해주자.
---
* 한 줄의 경우 이러면 끝나나, 문제는 여러 줄이 남았다는 것이다.
* 하지만 거꾸로 생각해보면, 다음 줄이 어떻게 선택이 되는 이전 줄이 동일하기만 하면 되는 문제다.
* 위 로직에서 생각해보면, 만약 선택한 알파벳이 달라진다면 이전에 선택된 알파벳들은 무조건 해당 선택되어야 한다.
    * 안 그러면 알파벳의 순서가 바뀔 수 있기 때문이다.
* 결국, 선택할 때 같은 알파벳인 경우, 원래 선택해야 하는 수보다 초과해서 선택해도 된다.
* 이를 다음 줄에 선택할 수 있는 후보로 두고, 다음 줄을 진행하면 된다.
    * 나머지는 선택되었다면 선택됨으로, 아니면 제거로 기록해두면 된다.
